{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport async function fetchImage(searchValue, page) {\n  const API_KEY = '43757343-ba5778b701f459784bea5ede7';\n  axios.defaults.baseURL = 'https://pixabay.com/api/';\n  const paramsString = `?key=${API_KEY}&q=${searchValue}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15`;\n\n  try {\n    const { data } = await axios.get(paramsString);\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n","export function renderMarkup(imgArray, gallery) {\n  const galleryMarkup = imgArray.reduce((acc, img) => {\n    return (acc += `<div class=\"gallery\">\n          <a href=\"${img.largeImageURL}\"><img src=\"${img.webformatURL}\" alt=\"${img.tags}\"  width=\"360\"/></a>\n          <div class=\"info\">\n              <p>Likes <span></span>${img.likes}</span></p>\n              <p>Views <span></span>${img.views}</span></p>\n              <p>Comments <span></span>${img.comments}</span></p>\n              <p>Downloads <span></span>${img.downloads}</span></p>\n          </div>\n              </div>`);\n  }, '');\n  gallery.insertAdjacentHTML('beforeend', galleryMarkup);\n}\n","import { fetchImage } from './js/pixabay-api';\nimport { renderMarkup } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  formEL: document.querySelector('#form'),\n  inputEL: document.querySelector('#image-input'),\n  galleryEL: document.querySelector('#gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n  loaderEl: document.querySelector('#loader-js'),\n};\n\nlet searchValue = '';\nlet page = 1;\n\nlet gallery = new SimpleLightbox('#gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction onFormSubmit(event) {\n  event.preventDefault();\n  refs.loadMoreBtn.classList.remove('is-visible');\n  page = 1;\n  refs.galleryEL.innerHTML = '<span class=\"loader\"></span>';\n  searchValue = refs.inputEL.value.trim();\n  if (searchValue === '') {\n    return iziToast.show({\n      title: '⨻',\n      titleSize: '20px',\n      message: 'Introduction field please enter the value to search',\n      color: 'white',\n      backgroundColor: 'red',\n      position: 'topRight',\n    });\n  }\n\n  fetchImage(searchValue, page)\n    .then(data => {\n      if (data.totalHits === 0) {\n        return iziToast.show({\n          title: '⨻',\n          titleSize: '20px',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          color: 'white',\n          backgroundColor: 'red',\n          position: 'topRight',\n        });\n      }\n      refs.galleryEL.innerHTML = '';\n      renderMarkup(data.hits, refs.galleryEL);\n      gallery.refresh();\n      if (data.totalHits > 15) {\n        refs.loadMoreBtn.classList.add('is-visible');\n      }\n    })\n    .catch(error => {\n      iziToast.show({\n        title: '⨻',\n        titleSize: '20px',\n        message: 'Something went wrong. Please try again',\n        color: 'white',\n        backgroundColor: 'red',\n        position: 'topRight',\n      });\n    });\n\n  refs.formEL.reset();\n}\nfunction onLoadMoreBtnClick(event) {\n  refs.loaderEl.innerHTML = '<span class=\"loader\"></span>';\n  page += 1;\n  fetchImage(searchValue, page).then(data => {\n    refs.loaderEl.innerHTML = '';\n    renderMarkup(data.hits, refs.galleryEL);\n    const galleryEl = document.querySelector('.gallery');\n    gallery.refresh();\n    const galleryHeight = galleryEl.getBoundingClientRect().height;\n    window.scrollBy({\n      top: galleryHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (Math.ceil(data.totalHits / 15) === page) {\n      refs.loadMoreBtn.classList.remove('is-visible');\n      iziToast.show({\n        title: '⨻',\n        titleSize: '20px',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        color: 'white',\n        backgroundColor: 'navy-blue',\n        position: 'topRight',\n      });\n    }\n  });\n}\nrefs.formEL.addEventListener('submit', onFormSubmit);\n\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n"],"names":["fetchImage","searchValue","page","API_KEY","axios","paramsString","data","error","renderMarkup","imgArray","gallery","galleryMarkup","acc","img","refs","SimpleLightbox","onFormSubmit","event","iziToast","onLoadMoreBtnClick","galleryEl","galleryHeight"],"mappings":"owBACO,eAAeA,EAAWC,EAAaC,EAAM,CAClD,MAAMC,EAAU,qCAChBC,EAAM,SAAS,QAAU,2BACzB,MAAMC,EAAe,QAAQF,CAAO,MAAMF,CAAW,iEAAiEC,CAAI,eAE1H,GAAI,CACF,KAAM,CAAE,KAAAI,CAAI,EAAK,MAAMF,EAAM,IAAIC,CAAY,EAC7C,OAAOC,CACR,OAAQC,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CCZO,SAASC,EAAaC,EAAUC,EAAS,CAC9C,MAAMC,EAAgBF,EAAS,OAAO,CAACG,EAAKC,IAClCD,GAAO;AAAA,qBACEC,EAAI,aAAa,eAAeA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA,sCAEjDA,EAAI,KAAK;AAAA,sCACTA,EAAI,KAAK;AAAA,yCACNA,EAAI,QAAQ;AAAA,0CACXA,EAAI,SAAS;AAAA;AAAA,sBAGlD,EAAE,EACLH,EAAQ,mBAAmB,YAAaC,CAAa,CACvD,CCNA,MAAMG,EAAO,CACX,OAAQ,SAAS,cAAc,OAAO,EACtC,QAAS,SAAS,cAAc,cAAc,EAC9C,UAAW,SAAS,cAAc,UAAU,EAC5C,YAAa,SAAS,cAAc,YAAY,EAChD,SAAU,SAAS,cAAc,YAAY,CAC/C,EAEA,IAAIb,EAAc,GACdC,EAAO,EAEPQ,EAAU,IAAIK,EAAe,aAAc,CAC7C,aAAc,MACd,aAAc,GAChB,CAAC,EAED,SAASC,EAAaC,EAAO,CAM3B,GALAA,EAAM,eAAc,EACpBH,EAAK,YAAY,UAAU,OAAO,YAAY,EAC9CZ,EAAO,EACPY,EAAK,UAAU,UAAY,+BAC3Bb,EAAca,EAAK,QAAQ,MAAM,KAAI,EACjCb,IAAgB,GAClB,OAAOiB,EAAS,KAAK,CACnB,MAAO,IACP,UAAW,OACX,QAAS,sDACT,MAAO,QACP,gBAAiB,MACjB,SAAU,UAChB,CAAK,EAGHlB,EAAWC,EAAaC,CAAI,EACzB,KAAKI,GAAQ,CACZ,GAAIA,EAAK,YAAc,EACrB,OAAOY,EAAS,KAAK,CACnB,MAAO,IACP,UAAW,OACX,QACE,2EACF,MAAO,QACP,gBAAiB,MACjB,SAAU,UACpB,CAAS,EAEHJ,EAAK,UAAU,UAAY,GAC3BN,EAAaF,EAAK,KAAMQ,EAAK,SAAS,EACtCJ,EAAQ,QAAO,EACXJ,EAAK,UAAY,IACnBQ,EAAK,YAAY,UAAU,IAAI,YAAY,CAEnD,CAAK,EACA,MAAMP,GAAS,CACdW,EAAS,KAAK,CACZ,MAAO,IACP,UAAW,OACX,QAAS,yCACT,MAAO,QACP,gBAAiB,MACjB,SAAU,UAClB,CAAO,CACP,CAAK,EAEHJ,EAAK,OAAO,OACd,CACA,SAASK,EAAmBF,EAAO,CACjCH,EAAK,SAAS,UAAY,+BAC1BZ,GAAQ,EACRF,EAAWC,EAAaC,CAAI,EAAE,KAAKI,GAAQ,CACzCQ,EAAK,SAAS,UAAY,GAC1BN,EAAaF,EAAK,KAAMQ,EAAK,SAAS,EACtC,MAAMM,EAAY,SAAS,cAAc,UAAU,EACnDV,EAAQ,QAAO,EACf,MAAMW,EAAgBD,EAAU,sBAAqB,EAAG,OACxD,OAAO,SAAS,CACd,IAAKC,EAAgB,EACrB,SAAU,QAChB,CAAK,EAEG,KAAK,KAAKf,EAAK,UAAY,EAAE,IAAMJ,IACrCY,EAAK,YAAY,UAAU,OAAO,YAAY,EAC9CI,EAAS,KAAK,CACZ,MAAO,IACP,UAAW,OACX,QAAS,6DACT,MAAO,QACP,gBAAiB,YACjB,SAAU,UAClB,CAAO,EAEP,CAAG,CACH,CACAJ,EAAK,OAAO,iBAAiB,SAAUE,CAAY,EAEnDF,EAAK,YAAY,iBAAiB,QAASK,CAAkB"}